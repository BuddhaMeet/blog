
<!DOCTYPE html>
<html>
<head>
  <title>Mindfulness meditation flow chart</title>
    
<meta http-equiv="content-type" content="text/html;charset=utf-8" />
<meta name="meditation program" content="Mindfulness ,This is an indicator of physical and mental health."/>


  <script
    type="text/javascript"
    src="/js/lib/dummy.js"
    
  ></script>

    <link rel="stylesheet" type="text/css" href="demo.css">

  <style type="text/css">
    svg {
  border: 1px solid #888;
}
242 + (300 - 242)
242 + 300
#info {
  box-sizing: border-box;
  border: 1px solid #DEDEDE;
  padding: 10px;
  width: 600px;
}

#info p {
  margin: 0;
  padding: 1px;
}


/* Other CSS Style reference from Pure CSS */

.manipulate input {
  width: 100px;
  padding: .5em .6em;
  display: inline-block;
  border: 1px solid #ccc;
  box-shadow: inset 0 1px 3px #ddd;
  border-radius: 4px;
  vertical-align: middle;
  box-sizing: border-box;
}

button {
  font-family: "微軟正黑體";
  font-size: 100%;
  padding: .5em .6em;
  color: #444;
  color: rgba(0, 0, 0, .8);
  border: 1px solid #999;
  border: transparent;
  background-color: #E6E6E6;
  text-decoration: none;
  border-radius: 2px;
}
button:hover{
  background-image: linear-gradient(transparent,rgba(0,0,0,.05) 40%,rgba(0,0,0,.1));
}

  </style>
  <!-- TODO: Missing CoffeeScript 2 -->

  <script type="text/javascript">


    window.onload=function(){
      
//	取得當前的 viewBox 資訊
function showViewBox() {
  const currentViewBox = document.getElementById('currentViewBox')
  let viewBox = svg.getAttribute('viewBox').split(' ').map( n => parseFloat(n))
  currentViewBox.textContent = `viewBox：(${viewBox[0].toFixed(0)}, ${viewBox[1].toFixed(0)}, ${viewBox[2].toFixed(0)}, ${viewBox[3].toFixed(0)})`
}

//	讓使用者可以設定 viewBox
function setViewBox() {
  //	取得使用者輸入的 viewBox 值
  const xMin = document.querySelector('[name="viewBox-x-min"]')
  const yMin = document.querySelector('[name="viewBox-y-min"]')
  const width = document.querySelector('[name="viewBox-width"]')
  const height = document.querySelector('[name="viewBox-height"]')
  let viewBox = `${xMin.value} ${yMin.value} ${width.value} ${height.value}`

  //	設定 SVG viewBox 屬性值
  svg.setAttribute('viewBox', viewBox)

  //	顯示最新的 viewBox 資訊
  showViewBox()
}
/* 
 *	開始：回報當前滑鼠座標資訊
 */
function reportCurrentPoint(e) {
  //	選取 HTML 各元素
  const info = document.getElementById('info')
  const offset = document.getElementById('offset')
  const client = document.getElementById('client')
  const showSvg = document.getElementById('showSvg')

  //	取得 viewport 座標系統中的 offset 和 client 座標值，並顯示於視窗上
  offset.textContent = `offset (${e.offsetX}, ${e.offsetY})`
  client.textContent = `client (${e.clientX}, ${e.clientY})`

  //	建立 SVG 座標點（0, 0）
  const clientPoint = svg.createSVGPoint()
    //	取得 CTM
  const CTM = svg.getScreenCTM()
    //  將 SVG 座標點的 x, y 設成 client(x, y)
  clientPoint.x = e.clientX
  clientPoint.y = e.clientY
    //	將 client 的座標點轉成 SVG 座標點
  SVGPoint = clientPoint.matrixTransform(CTM.inverse())
    //  將資訊顯示於視窗上
  showSvg.textContent = `svg (${SVGPoint.x.toFixed(0)}, ${SVGPoint.y.toFixed(0)})`
} //	結束：回報當前滑鼠座標資訊

/*	
開始：滑鼠拖拉的效果
*/
let moving
//	滑鼠點下，開始拖拉
function mouseDown(e){
	moving = true
}
//	拖拉的移動過程
function drag(e){
	if(moving === true){
    
     //	1. 取得一開始的 viewBox 值，原本是字串，拆成陣列，方便之後運算
    let startViewBox = svg.getAttribute('viewBox').split(' ').map( n => parseFloat(n))

    //	2. 取得滑鼠當前 viewport 中 client 座標值
    let startClient = {
      x: e.clientX,
      y: e.clientY
    }

    //	3. 計算對應回去的 SVG 座標值
    let newSVGPoint = svg.createSVGPoint()
    let CTM = svg.getScreenCTM()
    newSVGPoint.x = startClient.x
    newSVGPoint.y = startClient.y
    let startSVGPoint = newSVGPoint.matrixTransform(CTM.inverse())
    
    //	4. 計算拖曳後滑鼠所在的 viewport client 座標值
    let moveToClient = {
    	x: e.clientX + e.movementX,	//	movement 可以取得滑鼠位移量
      y: e.clientY + e.movementY
    }
    
    //	5. 計算對應回去的 SVG 座標值
    newSVGPoint = svg.createSVGPoint()
    CTM = svg.getScreenCTM()
    newSVGPoint.x = moveToClient.x
    newSVGPoint.y = moveToClient.y
    let moveToSVGPoint = newSVGPoint.matrixTransform(CTM.inverse())
    
    //	6. 計算位移量
    let delta = {
    	dx: startSVGPoint.x - moveToSVGPoint.x,
      dy: startSVGPoint.y - moveToSVGPoint.y
    }
    
    //	7. 設定新的 viewBox 值
    let moveToViewBox = `${startViewBox[0] + delta.dx} ${startViewBox[1] + delta.dy} ${startViewBox[2]} ${startViewBox[3]}` 
    svg.setAttribute('viewBox', moveToViewBox)
    console.log(moveToViewBox)
  }
}
//	滑鼠點擊結束（拖曳結束）
function mouseUp(){
	moving = false
  showViewBox()
}	//	結束：滑鼠拖拉的效果


/*	
開始：滑鼠縮放的效果
*/
function zoom(e){
		//	1.取得一開始的 viewBox。
  	let startViewBox = svg.getAttribute('viewBox').split(' ').map( n => parseFloat(n))
		
    //	2.取得滑鼠執行縮放位置的 viewPort Client 座標，並利用 CTM 對應取得 SVG 座標。
    
    //	2.1 取得滑鼠執行縮放的位置
    let startClient = {
      x: e.clientX,
      y: e.clientY
    }

    //	2.2 轉換成 SVG 座標系統中的 SVG 座標點
    let newSVGPoint = svg.createSVGPoint()
    let CTM = svg.getScreenCTM()
    newSVGPoint.x = startClient.x
    newSVGPoint.y = startClient.y
    let startSVGPoint = newSVGPoint.matrixTransform(CTM.inverse())
    
    
		//	3.進行縮放，如果要讓原本的尺寸縮放兩倍的話。
    //	3.1 設定縮放倍率
    let r 
    if (e.deltaY > 0) {
      r = 0.9
    } else if (e.deltaY < 0) {
      r = 1.1
    } else {
      r = 1
    }
    //	3.2 進行縮放
    svg.setAttribute('viewBox', `${startViewBox[0]} ${startViewBox[1]} ${startViewBox[2] * r} ${startViewBox[3] * r}`)
    
    //	4.將一開始滑鼠的執行縮放位置的 viewPort Client 座標利用新的 CTM ，轉換出對應的 SVG 座標。
    CTM = svg.getScreenCTM()
    let moveToSVGPoint = newSVGPoint.matrixTransform(CTM.inverse())
    
    //	5.取得在縮放過程中該圓點的位移量 `(svgX0 - svgX1)`。
    let delta = {
    	dx: startSVGPoint.x - moveToSVGPoint.x,
      dy: startSVGPoint.y - moveToSVGPoint.y
    }
    
    //	6.設定最終的 viewBox2 
  	let middleViewBox = svg.getAttribute('viewBox').split(' ').map( n => parseFloat(n))
    let moveBackViewBox = `${middleViewBox[0] + delta.dx} ${middleViewBox[1] + delta.dy} ${middleViewBox[2]} ${middleViewBox[3]}` 
    svg.setAttribute('viewBox', moveBackViewBox)
    
    //	更新 viewBox 資訊
    showViewBox()
}	//	結束：滑鼠縮放的效果

const svg = document.getElementById('svg')
const setViewBoxBtn = document.getElementById('setViewBoxBtn')
setViewBoxBtn.addEventListener('click', setViewBox)
showViewBox()
//	回報滑鼠座標事件
svg.addEventListener('mousemove', reportCurrentPoint, false)
//	拖曳的事件
svg.addEventListener('mousedown', mouseDown, false)
svg.addEventListener('mousemove', drag, false)
svg.addEventListener('mouseup', mouseUp, false)
//	縮放的事件
svg.addEventListener('wheel', zoom, false) 
 }

</script>

</head>
<body>  
 

 <div>   
 <!-- SVG可視圖形大小 -->    
  <svg id="svg" width="1200" height="600" viewBox="0 0 600 600">
 <!-- SVG圖形背景大小及顏色 -->    
  <rect x="0" y="0" fill="none" stroke="#eb7b2d" stroke-width="2" width="600" height="600" />
  
 <!--svg箭頭標籤 -->      
<defs>
  
   
    
   <marker id="Arr" markerWidth="8" markerHeight="8" refx="2" refy="5" orient="auto"><path d="M2,2 L2,8 L8,5 L2,2" style="fill: #ffc0cb;" />  
   </marker>
   <marker id="Arb" markerWidth="8" markerHeight="8" refx="2" refy="5" orient="auto"><path d="M2,2 L2,8 L8,5 L2,2" style="fill: #00bfff;" />  
   </marker>  
 </defs>   
   
<!-- 各個方塊連結與文字位置 --> 
    <text x="501" y="128"  style="font-size:18px;" >開始</text>
    <a href="https://ddm.nctu.me/"><rect x="488" y="100" width="62" height="43"  rx="15" ry="15" fill="white" opacity=".3" stroke="#0088ff" stroke-width="3" id="test" /></a>     
    
    
      
    <text x="392" y="126"  style="font-size:14px;" >1隨觀</text>
    <text x="342" y="116"  style="font-size:14px;" >Yes</text>
    <text x="415" y="166"  style="font-size:14px;" >No</text>
    <a href="https://ddm.nctu.me/"><rect x="380" y="100" width="62" height="43"  rx="7" ry="7" fill="orange" opacity=".3" stroke="#006600" stroke-width="1" id="test" /></a>            
          
    <text x="392" y="256"  style="font-size:14px;" >3禪法</text>
    <a href="https://ddm.nctu.me/"><rect x="380" y="230" width="62" height="43"  rx="7" ry="7" fill="orange" opacity=".3" stroke="#006600" stroke-width="1" id="test" /></a>      
          
    <text x="382" y="414"  style="font-size:14px;" >32其他</text>
    <a href="https://ddm.nctu.me/"><rect x="380" y="388" width="62" height="43"  rx="7" ry="7" fill="orange" opacity=".3" stroke="#006600" stroke-width="1" id="test" /></a>
      
    <text x="382" y="376"  style="font-size:14px;" >31默照禪</text>
    <a href="https://ddm.nctu.me/"><rect x="380" y="350" width="62" height="43"  rx="7" ry="7" fill="orange" opacity=".3" stroke="#006600" stroke-width="1" id="test" /></a>
      
      <text x="382" y="338"  style="font-size:14px;" >30呼吸法</text>
    <a href="https://ddm.nctu.me/"><rect x="380" y="312" width="62" height="43"  rx="7" ry="7" fill="orange" opacity=".3" stroke="#006600" stroke-width="1" id="test" /></a>
      
    <text x="392" y="516"  style="font-size:14px;" >7正見</text>
    <a href="https://ddm.nctu.me/"><rect x="380" y="490" width="62" height="43"  rx="7" ry="7" fill="orange" opacity=".3" stroke="#006600" stroke-width="1" id="test" /></a> 
      
    <text x="414" y="583"  style="font-size:14px;" >71出世間八正道－涅槃道</text>
    <a href="https://ddm.nctu.me/"><rect x="410" y="557" width="162" height="43"  rx="7" ry="7" fill="royalblue" opacity=".3" stroke="#006600" stroke-width="1" id="test" /></a> 
      
    <text x="238" y="583"  style="font-size:14px;" >72世間八正道－菩薩道</text>
    <a href="https://ddm.nctu.me/"><rect x="236" y="557" width="176" height="43"  rx="7" ry="7" fill="maroon" opacity=".3" stroke="#006600" stroke-width="1" id="test" /></a>  
      
    <text x="229" y="126"  style="font-size:14px;" >2如實正念</text>
    <text x="195" y="116"  style="font-size:14px;" >No</text>
    <text x="265" y="166"  style="font-size:14px;" >Yes</text>  
    <a href="https://ddm.nctu.me/"><rect x="230" y="100" width="62" height="43"  rx="7" ry="7" fill="orange" opacity=".3" stroke="#006600" stroke-width="1" id="test" /></a>            
          
    <text x="234" y="256"  style="font-size:14px;" >4四念處</text>
    <a href="https://ddm.nctu.me/"><rect x="230" y="230" width="62" height="43"  rx="7" ry="7" fill="orange" opacity=".3" stroke="#006600" stroke-width="1" 
        id="test" /></a>      
          
    <text x="234" y="386"  style="font-size:14px;" >5七覺支</text>
    <a href="https://ddm.nctu.me/"><rect x="230" y="360" width="62" height="43"  rx="7" ry="7" fill="orange" opacity=".3" stroke="#006600" stroke-width="1" 
        id="test" /></a>
        
   <text x="234" y="516"  style="font-size:14px;" >6四聖諦</text>
    <a href="https://ddm.nctu.me/"><rect x="230" y="490" width="62" height="43"  rx="7" ry="7" fill="orange" opacity=".3" stroke="#006600" stroke-width="1" 
        id="test" /></a>
    
     <text x="79" y="126"  style="font-size:14px;" >8五蓋對治</text>
    <a href="https://ddm.nctu.me/"><rect x="80" y="100" width="62" height="43"  rx="7" ry="7" fill="orange" opacity=".3" stroke="#006600" stroke-width="1" 
        id="test" /></a>            
          
    <text x="84" y="256"  style="font-size:14px;" >9四正勤</text>
    <a href="https://ddm.nctu.me/"><rect x="80" y="230" width="62" height="43"  rx="7" ry="7" fill="orange" opacity=".3" stroke="#006600" stroke-width="1" 
        id="test" /></a>      
          
    <text x="83" y="386"  style="font-size:14px;" >10六入觸</text>
    <a href="https://ddm.nctu.me/"><rect x="80" y="360" width="62" height="43"  rx="7" ry="7" fill="orange" opacity=".3" stroke="#006600" stroke-width="1" 
        id="test" /></a>
    
      <text x="60" y="28"  style="font-size:14px;" >81世間煩惱</text>
    <a href="https://ddm.nctu.me/"><rect x="56" y="2" width="82" height="43"  rx="7" ry="7" fill="red" opacity=".3" stroke="#006600" stroke-width="1" 
        id="test" /></a>
      
     
    <!-- 8-81指示線 --> 
    <polyline x="20" y="50" points="110,100 100,57" fill="none" stroke="pink" stroke-width="2" marker-end="url(#Arr)" ></polyline> 
      <!-- 1-3指示線 --> 
      <polyline x="20" y="50" points="412,143 412,218" fill="none" stroke="pink" stroke-width="2" marker-end="url(#Arr)" ></polyline>  
      <!-- 2-8指示線 --> 
     <polyline x="20" y="50" points="230,120 155,120" fill="none" stroke="pink" stroke-width="2" marker-end="url(#Arr)" ></polyline> 
      
     <!-- 開始-1指示線 -->  
   <polyline x="20" y="50" points="487,120 454,120" fill="none" stroke="deepskyblue" stroke-width="2" marker-end="url(#Arb)" ></polyline>  
     <!-- 1-2指示線 -->  
   <polyline x="20" y="50" points="380,120 304,120" fill="none" stroke="deepskyblue" stroke-width="2" marker-end="url(#Arb)" ></polyline>
     <!-- 2-4指示線 -->  
    <polyline x="20" y="50" points="262,143 262,218" fill="none" stroke="deepskyblue" stroke-width="2" marker-end="url(#Arb)" ></polyline>
      <!-- 8-9指示線 --> 
     <polyline x="20" y="50" points="115,143 115,218" fill="none" stroke="deepskyblue" stroke-width="2" marker-end="url(#Arb)" ></polyline>   
      <!-- 7-71指示線 --> 
    <polyline x="20" y="50" points="411,533 411,560" fill="none" stroke="deepskyblue" stroke-width="2"></polyline>      <!-- 7-1指示線 -->   
    <path d="M442 512 H500 Q520 512, 520 480 V155" fill="none" stroke="deepskyblue" stroke-width="2" marker-end="url(#Arb)" ></path> 
     <!-- 30-3指示線 -->   
     <polyline x="20" y="50" points="412,312 412,285" fill="none" stroke="deepskyblue" stroke-width="2" marker-end="url(#Arb)" ></polyline>  
    
      <!-- 3-4指示線 -->  
   <polyline x="20" y="50" points="380,250 304,250" fill="none" stroke="deepskyblue" stroke-width="2" marker-end="url(#Arb)" ></polyline> 
      
   <!-- 6-7指示線 -->  
   <polyline x="20" y="50" points="292,512 368,512" fill="none" stroke="deepskyblue" stroke-width="2" marker-end="url(#Arb)" ></polyline>
    <!-- 10-5指示線 -->  
   <polyline x="20" y="50" points="142,380 218,380" fill="none" stroke="deepskyblue" stroke-width="2" marker-end="url(#Arb)" ></polyline>  
      
    <!-- 4-5指示線 -->  
    <polyline x="20" y="50" points="262,273 262,348" fill="none" stroke="deepskyblue" stroke-width="2" marker-end="url(#Arb)" ></polyline>
      <!-- 9-10指示線 --> 
     <polyline x="20" y="50" points="115,273 115,348" fill="none" stroke="deepskyblue" stroke-width="2" marker-end="url(#Arb)" ></polyline>    <!-- 5-6指示線 -->  
    <polyline x="20" y="50" points="262,403 262,478" fill="none" stroke="deepskyblue" stroke-width="2" marker-end="url(#Arb)" ></polyline>   
     <text x="210" y="50"  style="font-size:50px" fill="lightslategray" >禪修行程</text>    
    </svg>
    </div>
    <div class="display" >
    <a href="dom-1.html"><img src="chart1.png" alt="行程表1連結" style="width:100px;height:100px;border:5px steelblue;"></a>
       
    <a href="dom-2.html"><img src="chart2.png" alt="行程表2連結" style="width:100px;height:100px;border:5px steelblue;"></a>
       
    <a href="dom-3.html"><img src="chart3.png" alt="行程表3連結" style="width:100px;height:100px;border:5px steelblue;"></a>
       
    <a href="http://ddm.nctu.me/"><img src="chart4.png" alt="首頁連結" style="width:100px;height:100px;border:5px steelblue;"></a>
  
       </div>    
    
    


  <script>
    // tell the embed parent frame the height of the content
    if (window.parent && window.parent.parent){
      window.parent.parent.postMessage(["resultsFrame", {
        height: document.body.getBoundingClientRect().height,
        slug: "c5ymmjva"
      }], "*")
    }
  </script>
</body>
</html>
